## WinsockUnrealNetworking
Winsock으로 Unreal Engine에서 멀티플레이 구현 실습  

# 이론 
TCP/IP, Windows System, Concurrency

# 기술 스택
Winsock(IOCP), C++20(MSVC), Unreal Engine, PostgreSQL

# 구조
웹에서 회원가입, 클라이언트에서 웹서버로 로그인 - 채팅 서버 접속

콘솔 서버, 클라이언트 먼저 구현 이후 언리얼 프로젝트 구현  
  
# 구현 사항
전체 채팅, 귓속말, 친구, 그룹

# 서버 동작
현재 구현은, 소켓에 할당한 버퍼로 데이터를 받음 -> 이를 메시지 매니저로 복사를 해서 파싱한 뒤 메시지를 사용함. 복사 비용이 발생  
  
복사 안 하는 방향으로는 소켓에 할당할 버퍼를 2개 두고, 버퍼 하나에 데이터 받으면서 해당 버퍼의 특정 주소들을 메시지 시작 주소로 사용하다가,  
마지막에 메시지 자리가 부족할 때 다른 버퍼로 일부 복사한 뒤 이어어서 받는 것. 이러면 동시성 문제가 좀 더 엄격해짐.  

로그인 그냥 서버로 바로 아이디, 비밀번호 쏘도록 구현  


# 개선 사항
한 번 송신시에 메시지큐에서 10개 메시지를 꺼내 사용하는데,
만약에 메시지가 쌓이는 속도 > 메시지 소비 속도면 소비 속도를 늘려야 함  

온전히 메모리풀로써 Init이후 메모리 할당 없이 동작하는데, 버퍼 부족할 경우를 대비해 동적 메모리를 구현하긴 해야함  


아직 학습용 프로토타입이고 추후에 제대로된 소켓 라이브러리를 구현 할 일이 생길까 생각중  

서버측에서 연결된 클라이언트들을 잘 관리하는 법에 대해서...  
일단은 LoginedClients(std::map)에 추가, 삭제하는 것만 락을 걸고 이외의 것들(조회)은 문제없이 넘어가도록  
(송신 시도를 하더라도 SessionNumber 확인을 통해 송신 안 하든가 뭐)  
지금 로그인된 소켓들 대상으로만 하트비트 관리하고 있는데, 그냥 연결된 애들 전체적으로 처리를 해야함. 근데 귀찮음  